{
  "$schema": "./runtime-replacements.schema.json",
  "description": "Declares Solidity files that should be replaced with runtime implementations instead of being transpiled. This is necessary for files with complex Yul/assembly that cannot be accurately transpiled.",
  "replacements": [
    {
      "source": "lib/Ownable.sol",
      "reason": "Complex Yul assembly for storage slot manipulation and event logging",
      "runtimeModule": "../runtime",
      "exports": ["Ownable"],
      "interface": {
        "class": "Ownable",
        "extends": "Contract",
        "abstract": true,
        "methods": [
          { "name": "_guardInitializeOwner", "visibility": "protected", "returns": "boolean" },
          { "name": "_initializeOwner", "visibility": "protected", "params": ["newOwner: string"], "returns": "void" },
          { "name": "_setOwner", "visibility": "protected", "params": ["newOwner: string"], "returns": "void" },
          { "name": "_checkOwner", "visibility": "protected", "returns": "void" },
          { "name": "_ownershipHandoverValidFor", "visibility": "protected", "returns": "bigint" },
          { "name": "transferOwnership", "visibility": "public", "params": ["newOwner: string"], "returns": "void" },
          { "name": "renounceOwnership", "visibility": "public", "returns": "void" },
          { "name": "requestOwnershipHandover", "visibility": "public", "returns": "void" },
          { "name": "cancelOwnershipHandover", "visibility": "public", "returns": "void" },
          { "name": "completeOwnershipHandover", "visibility": "public", "params": ["pendingOwner: string"], "returns": "void" },
          { "name": "owner", "visibility": "public", "returns": "string" },
          { "name": "ownershipHandoverExpiresAt", "visibility": "public", "params": ["pendingOwner: string"], "returns": "bigint" }
        ],
        "mixin": "  // Ownable mixin (from secondary base class)\n  private _owner: string = '0x0000000000000000000000000000000000000000';\n  protected _initializeOwner(newOwner: string): void {\n    this._owner = newOwner;\n  }\n  protected _checkOwner(): void {\n    if (this._msg.sender !== this._owner) {\n      throw new Error(\"Unauthorized\");\n    }\n  }\n  owner(): string {\n    return this._owner;\n  }"
      }
    },
    {
      "source": "lib/EnumerableSetLib.sol",
      "reason": "Complex Yul assembly for gas-optimized set operations with inline storage manipulation",
      "runtimeModule": "../runtime",
      "exports": ["EnumerableSetLib", "AddressSet", "Bytes32Set", "Uint256Set", "Int256Set"],
      "interface": {
        "class": "EnumerableSetLib",
        "extends": "Contract",
        "abstract": false,
        "types": [
          { "name": "AddressSet", "kind": "interface" },
          { "name": "Bytes32Set", "kind": "interface" },
          { "name": "Uint256Set", "kind": "interface" },
          { "name": "Int256Set", "kind": "interface" }
        ],
        "methods": [
          { "name": "length", "visibility": "protected", "params": ["set: AddressSet"], "returns": "bigint" },
          { "name": "contains", "visibility": "protected", "params": ["set: AddressSet", "value: string"], "returns": "boolean" },
          { "name": "add", "visibility": "protected", "params": ["set: AddressSet", "value: string"], "returns": "boolean" },
          { "name": "remove", "visibility": "protected", "params": ["set: AddressSet", "value: string"], "returns": "boolean" },
          { "name": "values", "visibility": "protected", "params": ["set: AddressSet"], "returns": "string[]" },
          { "name": "at", "visibility": "protected", "params": ["set: AddressSet", "index: bigint"], "returns": "string" }
        ]
      }
    },
    {
      "source": "lib/ECDSA.sol",
      "reason": "Complex Yul assembly for gas-optimized ECDSA signature recovery using ecrecover precompile",
      "runtimeModule": "../runtime",
      "exports": ["ECDSA"],
      "interface": {
        "class": "ECDSA",
        "extends": "Contract",
        "abstract": false,
        "constants": [
          { "name": "N", "type": "bigint", "visibility": "internal" }
        ],
        "methods": [
          { "name": "recover", "visibility": "internal", "params": ["hash: string", "signature: string"], "returns": "string", "static": true },
          { "name": "recoverCalldata", "visibility": "internal", "params": ["hash: string", "signature: string"], "returns": "string", "static": true },
          { "name": "tryRecover", "visibility": "internal", "params": ["hash: string", "signature: string"], "returns": "string", "static": true },
          { "name": "tryRecoverCalldata", "visibility": "internal", "params": ["hash: string", "signature: string"], "returns": "string", "static": true },
          { "name": "toEthSignedMessageHash", "visibility": "internal", "params": ["hash: string"], "returns": "string", "static": true },
          { "name": "canonicalHash", "visibility": "internal", "params": ["signature: string"], "returns": "string", "static": true }
        ]
      }
    },
    {
      "source": "lib/EIP712.sol",
      "reason": "Complex Yul assembly for gas-optimized EIP-712 domain separator and typed data hashing",
      "runtimeModule": "../runtime",
      "exports": ["EIP712"],
      "interface": {
        "class": "EIP712",
        "extends": "Contract",
        "abstract": true,
        "constants": [
          { "name": "_DOMAIN_TYPEHASH", "type": "string", "visibility": "internal" }
        ],
        "methods": [
          { "name": "_domainNameAndVersion", "visibility": "protected", "returns": "[string, string]", "abstract": true },
          { "name": "_domainNameAndVersionMayChange", "visibility": "protected", "returns": "boolean" },
          { "name": "_domainSeparator", "visibility": "protected", "returns": "string" },
          { "name": "_hashTypedData", "visibility": "protected", "params": ["structHash: string"], "returns": "string" },
          { "name": "eip712Domain", "visibility": "public", "returns": "object" },
          { "name": "hashTypedData", "visibility": "public", "params": ["structHash: string"], "returns": "string" }
        ],
        "mixin": "  // EIP712 mixin (from secondary base class)\n  static readonly _DOMAIN_TYPEHASH: string = '0x8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f';\n  protected _domainNameAndVersion(): [string, string] {\n    return ['', ''];\n  }\n  protected _domainSeparator(): `0x${string}` {\n    const [name, version] = this._domainNameAndVersion();\n    return keccak256(encodeAbiParameters(\n      [{type: 'bytes32'}, {type: 'bytes32'}, {type: 'bytes32'}, {type: 'uint256'}, {type: 'address'}],\n      [(this.constructor as any)._DOMAIN_TYPEHASH as `0x${string}`, keccak256(encodePacked(['string'], [name])), keccak256(encodePacked(['string'], [version])), 31337n, this._contractAddress as `0x${string}`]\n    ));\n  }\n  protected _hashTypedData(structHash: `0x${string}` | string): `0x${string}` {\n    return keccak256(encodePacked(['string', 'bytes32', 'bytes32'], ['\\x19\\x01', this._domainSeparator(), structHash as `0x${string}`]));\n  }\n  hashTypedData(structHash: `0x${string}` | string): string {\n    return this._hashTypedData(structHash);\n  }"
      }
    }
  ]
}
